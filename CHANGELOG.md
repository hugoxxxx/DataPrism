# Changelog / 更新日志

## [2026-01-25]

### 🎨 UI & Aesthetics / 界面与美学
- **字体系统优化**: 统一使用 Inter 字体，建立了完整的 FONT_SIZE 层级（11px-24px），解决了 LCD 字体溢出和表格字体过大的问题。
- **表格列宽自适应**: 实现了智能列宽策略，区分固定宽（光圈/快门）、内容自适应（文件名/相机）和拉伸（胶片/镜头）列。
- **去除重复元素**: 移除了表头的蓝色分隔线和多余的边框，使界面更加“空气感”和专业。

- **三栏式布局重构**: 引入了“双导航列表 + 预览窗格”设计。
    - **双导航联动**: 实现照片列表与元数据记录列表的双向同步。
    - **实时照片预览**: 在编辑窗格右侧增加照片实时预览，确保元数据匹配的准确性。
- **元数据数量精准对齐**: 彻底移除了“自动补全空白记录”的逻辑。现在编辑器显示的记录数与您导入的 JSON 条目数**完全一致**，绝不多出一条无用数据。
- **序号显示精简化**: 按照您的反馈，移除了括号中的帧号备注，仅保留简洁的 `#[序号]`（如 `#01`, `#02`），界面更加清爽专业。
- **Studio 设计系统 2.0 (Engineering Refactor)**:
    - **主题外部化**: 配色参数已从硬编码 Python 移至 `resources/themes/studio_dark.json`。现在支持零代码调整配色，并为未来的“亮色模式”打下了坚实基础。
    - **哈苏 3 阶按钮体系**: 引入了 `Primary` (高亮橙), `Secondary` (描边), `Ghost` (纯文本) 三级按钮逻辑。界面信息层级更清晰，交互更有深度。
    - **对比度深度审计**: 
        - 大幅调亮了“序列偏移”等次要标签的色彩亮度（银盐灰）。
        - **QMessageBox 专项修复**: 彻底解决了系统弹窗按钮（Yes/No）“白内障”无法辨认的问题，文字对比度提升至工业级标准。
- **FieldMappingDialog 工业级重构**:
    - **鲁棒性升级**: 引入了基于 `backend-api-security` 技能的防御性编程，强化了对畸形 CSV/TXT 表头的校验与过滤。
    - **美学对齐**: 彻底解决了映射区域背景变白的 Regressions，实现了与“Studio”影调一致的全屏暗黑美学。
    - **智能匹配引擎**: 优化了字段自动识别算法，显著提升了对中文和非标准 EXIF 列名的识别准确率。

### 🐛 Bug Fixes / 错误修复
- **导入功能回归修复**: 修正了 TXT 和 CSV 导入后数据无法显示的 Bug。该问题由重构后字段名不匹配（`camera/lens` vs `camera_model/lens_model`）引起，现已全面对齐。
- **元数据匹配逻辑**: 修正了点击照片时显示原始 EXIF 的问题。现在点击照片将根据 `Sequence Offset` 严格显示对应的导入元数据。
- **列表同步修复**: 解决了手动选择元数据记录时，照片列表无法自动跳转的同步问题。
- **鲁棒性增强**: 完善了在无关联照片或元数据越界时的 UI 处理（显示空白表单及占位图）。
